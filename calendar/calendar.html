<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
    <meta name="format-detection" content="telephone=no">
    <title>Document</title>
    <!--    <link rel="stylesheet" type="text/css" href="css/weui.css">-->
    <link rel="stylesheet" type="text/css" href="css/public.css">
    <link rel="stylesheet" type="text/css" href="css/calendar.css">

    <link rel="stylesheet" type="text/css" href="css/nicedatepicker.css">
    <script type="text/javascript" src="js/zepto.js"></script>
    <script type="text/javascript" src="js/zepto-touch.js"></script>
    <script type="text/javascript" src="js/nicedatepicker.js"></script>
    <!--    <script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>-->
    <!--    <script type="text/javascript" src="js/public.js"></script>-->
</head>

<body>
    <header>
        <div class="back">返回</div>
        <div class="setState">设定状态</div>
    </header>
    <div class="timePickWrap">
        <div id="timeShow"></div>
        <div id="timepicker">
        </div>

        <div class="top"><img src="img/slideTop.gif" alt=""></div>
        <div class="left"><img src="img/slideLeft.gif" alt=""></div>
        <div class="right"><img src="img/slideRight.gif" alt=""></div>
        <div class="bottom"><img src="img/slideBot.gif" alt=""></div>
    </div>
    <div class="content">
        <div>
            <span id="month"></span>月<span id="day"></span>日<span id="time" data-time="morning">上午</span> </div>
        <div id="open">
            <img id="switch" src="img/but.png">
        </div>
    </div>
    <div class="content where">
        <div>请选择状况</div>
    </div>
    <div class="content" id="status">
        <div>状况</div>
        <!--<div><span>请选择</span> > </div>-->
    </div>
    <div class="status">
        <ul>
            <li>在三墩</li>
            <li>正常上班</li>
            <li>请假</li>
            <li>自定义</li>
        </ul>
    </div>
    <script type="text/javascript">
        //日历初始化 第一个参数为 日历所在的div, 第二个为 显示时间的div
        var nicedatepicker = new nicedatepicker().init(document.getElementById('timepicker'), document.getElementById('timeShow'));
        $(function() {
            var data = new Date();
            var ThisMonth = data.getMonth() + 1;
            var today = data.getDate();
            $("#month").html(ThisMonth);
            $("#day").html(today);
        })

        $("#timepicker").on('tap', function(event) {
            var srcObj = event.target;
            if (srcObj.className != "datepicker_otherMonth" && srcObj.tagName.toLocaleLowerCase() == "td") {
                $("#timepicker td.timeChoose").removeClass('timeChoose');
                $(srcObj).addClass("timeChoose");
                
                var day = $(".timeChoose").text();
                var month = nicedatepicker.nowYearAndM.month;
                nicedatepicker.chooseDay.month = month;
                nicedatepicker.chooseDay.day = day;
                $("#month").html(month);
                $("#day").html(day);
            }
        })

        $("#open").tap(function() {
            var dataTime = document.getElementById("time");
            var timeStatus = dataTime.getAttribute("data-time")
            switch (timeStatus) {
                case "morning":
                    $("#switch").css("top", "-22px");
                    $("#time").html("下午");
                    dataTime.setAttribute("data-time", "afternoon");
                    break;
                case "afternoon":
                    $("#switch").css("top", "-44px");
                    $("#time").html("全天");
                    dataTime.setAttribute("data-time", "allDay");
                    break;
                case "allDay":
                    $("#switch").css("top", "0px");
                    $("#time").html("上午");
                    dataTime.setAttribute("data-time", "morning");
                    break;
            }
        });

        $(".status li").tap(function() {
            var self = $(this);
            self.siblings().removeClass('whereChoose');
            self.addClass('whereChoose');
            var statusText = self.text();
            $(".where").html(statusText);
        });
    </script>
</body>

</html>